{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/caizhengying/Desktop/NTU/114-1/%E8%B3%87%E6%96%99%E5%BA%AB/Final_Project/DBMS_FP/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,uMAAY,EAAC,aAAa"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/caizhengying/Desktop/NTU/114-1/%E8%B3%87%E6%96%99%E5%BA%AB/Final_Project/DBMS_FP/src/components/BottomNav.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\n\nexport default function BottomNav() {\n  const pathname = usePathname();\n\n  const navItems = [\n    { href: '/', label: 'ËàûÂúòÁÄèË¶Ω', icon: 'üè†' },\n    { href: '/profile', label: 'ÂÄã‰∫∫Ê™îÊ°à', icon: 'üë§' },\n  ];\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50\">\n      <div className=\"flex justify-around items-center py-2\">\n        {navItems.map((item) => {\n          const isActive = pathname === item.href;\n          return (\n            <Link\n              key={item.href}\n              href={item.href}\n              className={`flex flex-col items-center gap-1 py-2 px-4 rounded-lg transition-colors ${\n                isActive ? 'text-purple-600' : 'text-gray-600 hover:text-gray-800'\n              }`}\n            >\n              <span className=\"text-2xl\">{item.icon}</span>\n              <span className=\"text-xs font-medium\">{item.label}</span>\n            </Link>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,WAAW;QACf;YAAE,MAAM;YAAK,OAAO;YAAQ,MAAM;QAAK;QACvC;YAAE,MAAM;YAAY,OAAO;YAAQ,MAAM;QAAK;KAC/C;IAED,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACZ,SAAS,GAAG,CAAC,CAAC;gBACb,MAAM,WAAW,aAAa,KAAK,IAAI;gBACvC,qBACE,8OAAC,uKAAI;oBAEH,MAAM,KAAK,IAAI;oBACf,WAAW,CAAC,wEAAwE,EAClF,WAAW,oBAAoB,qCAC/B;;sCAEF,8OAAC;4BAAK,WAAU;sCAAY,KAAK,IAAI;;;;;;sCACrC,8OAAC;4BAAK,WAAU;sCAAuB,KAAK,KAAK;;;;;;;mBAP5C,KAAK,IAAI;;;;;YAUpB;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Users/caizhengying/Desktop/NTU/114-1/%E8%B3%87%E6%96%99%E5%BA%AB/Final_Project/DBMS_FP/src/app/project/%5Bid%5D/apply/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter, useParams } from 'next/navigation';\nimport { supabase } from '@/lib/supabase';\nimport BottomNav from '@/components/BottomNav';\n\nexport default function ApplyProjectPage() {\n  const router = useRouter();\n  const params = useParams();\n  const projectId = params.id as string;\n  const [loading, setLoading] = useState(false);\n  const [project, setProject] = useState<any>(null);\n  const [targets, setTargets] = useState<any[]>([]);\n  const [selectedTarget, setSelectedTarget] = useState('');\n  const [error, setError] = useState('');\n  const userId = localStorage.getItem('userId');\n\n  useEffect(() => {\n    if (!userId) {\n      router.push('/auth');\n      return;\n    }\n    if (projectId) {\n      fetchProjectData();\n    }\n  }, [projectId, router, userId]);\n\n  const fetchProjectData = async () => {\n    try {\n      const { data: projectData } = await supabase\n        .from('project')\n        .select('*')\n        .eq('p_id', projectId)\n        .single();\n\n      if (projectData) setProject(projectData);\n\n      const { data: targetsData } = await supabase\n        .from('project_target')\n        .select(`\n          target_seq,\n          idol_id,\n          status,\n          kpop_idols(stage_name)\n        `)\n        .eq('project_id', projectId)\n        .eq('status', 'I'); // Âè™È°ØÁ§∫Á©∫Áº∫‰ΩçÁΩÆ\n\n      if (targetsData) {\n        setTargets(targetsData);\n      }\n    } catch (err) {\n      console.error('Error:', err);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!userId || !selectedTarget) return;\n\n    try {\n      setLoading(true);\n      setError('');\n\n      // ÁîüÊàêÁî≥Ë´ãID\n      const generateAppliId = () => {\n        const timestamp = Date.now();\n        const random = Math.floor(Math.random() * 10000);\n        return timestamp * 10000 + random;\n      };\n\n      const appliId = generateAppliId();\n      const targetSeq = parseInt(selectedTarget);\n\n      // Ê™¢Êü•ÊòØÂê¶Â∑≤Á∂ìÁî≥Ë´ãÈÅé\n      const { data: existing } = await supabase\n        .from('project_applications')\n        .select('appli_id')\n        .eq('p_id', projectId)\n        .eq('applicant_id', userId)\n        .eq('target_seq', targetSeq)\n        .single();\n\n      if (existing) {\n        setError('ÊÇ®Â∑≤Á∂ìÁî≥Ë´ãÈÅéÊ≠§‰ΩçÁΩÆ');\n        return;\n      }\n\n      // ÂâµÂª∫Áî≥Ë´ã\n      const { error: insertError } = await supabase\n        .from('project_applications')\n        .insert({\n          appli_id: appliId,\n          p_id: projectId,\n          target_seq: targetSeq,\n          applicant_id: userId,\n          applied_time: new Date().toISOString(),\n          status: 'W', // Á≠âÂæÖÂØ©Ê†∏\n        });\n\n      if (insertError) throw insertError;\n\n      alert('Áî≥Ë´ãÊàêÂäüÔºÅÂ∞àÊ°àÁôºËµ∑‰∫∫Â∞áÊúÉÂØ©Ê†∏ÊÇ®ÁöÑÁî≥Ë´ã„ÄÇ');\n      router.push('/profile/projects');\n    } catch (err: any) {\n      setError('Áî≥Ë´ãÂ§±ÊïóÔºö' + (err.message || 'Êú™Áü•ÈåØË™§'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!project) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-white pb-20\">\n        <div className=\"container mx-auto px-4 py-6\">\n          <div className=\"text-center py-12\">\n            <p className=\"text-gray-600\">ËºâÂÖ•‰∏≠...</p>\n          </div>\n        </div>\n        <BottomNav />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-white pb-20\">\n      <div className=\"container mx-auto px-4 py-6\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-3xl font-bold text-purple-600\">Áî≥Ë´ãÂä†ÂÖ•Â∞àÊ°à</h1>\n          <button\n            onClick={() => router.back()}\n            className=\"text-gray-600 hover:text-gray-800\"\n          >\n            ‚Üê ËøîÂõû\n          </button>\n        </div>\n\n        <div className=\"bg-white rounded-xl shadow-md p-6 mb-4\">\n          <h2 className=\"text-xl font-bold text-gray-800 mb-2\">{project.porject_title}</h2>\n          {project.discription && (\n            <p className=\"text-gray-600\">{project.discription}</p>\n          )}\n        </div>\n\n        {error && (\n          <div className=\"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-lg text-sm\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"bg-white rounded-xl shadow-md p-6\">\n          <h2 className=\"text-xl font-bold text-gray-800 mb-4\">ÈÅ∏ÊìáÁî≥Ë´ã‰ΩçÁΩÆ</h2>\n          \n          {targets.length === 0 ? (\n            <p className=\"text-gray-500\">ÁõÆÂâçÊ≤íÊúâÁ©∫Áº∫‰ΩçÁΩÆ</p>\n          ) : (\n            <div className=\"space-y-3 mb-6\">\n              {targets.map((target) => (\n                <label\n                  key={target.target_seq}\n                  className=\"flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-purple-50\"\n                >\n                  <input\n                    type=\"radio\"\n                    name=\"target\"\n                    value={target.target_seq}\n                    checked={selectedTarget === target.target_seq.toString()}\n                    onChange={(e) => setSelectedTarget(e.target.value)}\n                    className=\"mr-3\"\n                  />\n                  <div>\n                    <span className=\"font-medium\">‰ΩçÁΩÆ {target.target_seq}</span>\n                    {target.kpop_idols && (\n                      <span className=\"text-gray-600 ml-2\">\n                        ({target.kpop_idols.stage_name})\n                      </span>\n                    )}\n                  </div>\n                </label>\n              ))}\n            </div>\n          )}\n\n          <div className=\"flex gap-3\">\n            <button\n              type=\"button\"\n              onClick={() => router.back()}\n              className=\"flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg font-medium hover:bg-gray-300\"\n            >\n              ÂèñÊ∂à\n            </button>\n            <button\n              type=\"submit\"\n              disabled={loading || targets.length === 0 || !selectedTarget}\n              className=\"flex-1 bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 disabled:opacity-50\"\n            >\n              {loading ? 'Áî≥Ë´ã‰∏≠...' : 'Êèê‰∫§Áî≥Ë´ã'}\n            </button>\n          </div>\n        </form>\n      </div>\n\n      <BottomNav />\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}